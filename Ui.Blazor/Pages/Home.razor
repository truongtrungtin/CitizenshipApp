@page "/home"
@implements IDisposable

<section class="mb-4">
  <h1 class="fw-semibold">@T["Home.Title"]</h1>
  <p class="text-muted mb-3">
    @T["Home.Tagline"]
  </p>

  <div class="row g-3">
    <div class="col-12 col-lg-4">
      <div class="p-3 border rounded h-100">
        <div class="fw-semibold">@T["Home.Card.Elderly.Title"]</div>
        <div class="text-muted small">@T["Home.Card.Elderly.Desc"]</div>
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="p-3 border rounded h-100">
        <div class="fw-semibold">@T["Home.Card.Bilingual.Title"]</div>
        <div class="text-muted small">@T["Home.Card.Bilingual.Desc"]</div>
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="p-3 border rounded h-100">
        <div class="fw-semibold">@T["Home.Card.Progress.Title"]</div>
        <div class="text-muted small">@T["Home.Card.Progress.Desc"]</div>
      </div>
    </div>
  </div>
</section>

@if (AppState.IsAuthenticated)
{
  <div class="d-flex flex-wrap gap-2">
    <a class="btn btn-primary" href="/study">@T["Home.CTA.Start"]</a>
    <a class="btn btn-outline-secondary" href="/settings">@T["Home.CTA.Settings"]</a>
  </div>
}
else
{
  <div class="d-flex flex-wrap gap-2">
    <a class="btn btn-primary" href="/login">@T["Home.CTA.Login"]</a>
    <a class="btn btn-outline-secondary" href="/register">@T["Home.CTA.Register"]</a>
  </div>
}


@code {
  protected override void OnInitialized()
  {
    UserSettings.OnChange += HandleSettingsChanged;
  }

  private void HandleSettingsChanged()
  {
    _ = InvokeAsync(StateHasChanged);
  }

  public void Dispose()
  {
    UserSettings.OnChange -= HandleSettingsChanged;
  }
}
