@implements IDisposable

<div class="nav flex-column">
  <NavLink class="nav-link" href="/home">Home</NavLink>

  @if (AppState.IsAuthenticated)
  {
    <NavLink class="nav-link" href="/study">Study</NavLink>
    <NavLink class="nav-link" href="/settings">Settings</NavLink>
    <NavLink class="nav-link" href="/logout">Logout</NavLink>
  }
  else
  {
    <NavLink class="nav-link" href="/login">Login</NavLink>
    <NavLink class="nav-link" href="/register">Register</NavLink>
  }
</div>

@code {
  protected override void OnInitialized()
  {
    // Re-render NavMenu whenever auth/onboarding state changes.
    AppState.OnChange += OnAppStateChanged;
  }

  private void OnAppStateChanged()
  {
    // Must re-render UI on state changes.
    _ = InvokeAsync(StateHasChanged);
  }

  public void Dispose()
  {
    AppState.OnChange -= OnAppStateChanged;
  }
}
